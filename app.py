import streamlit as st
from datetime import date, datetime

# ==========================================
# 1. ç³»çµ±è¨­å®š
# ==========================================
st.set_page_config(
    page_title="2026 æ–°åˆ¶åº¦æ¬Šç›Šé€š | ä¸‰ä¸€å”æœƒ",
    page_icon="âš–ï¸",
    layout="centered",
    initial_sidebar_state="collapsed"
)

# ==========================================
# 2. CSS ç¾å­¸ (ä¸‰ä¸€å”æœƒé¢¨æ ¼ï¼šç©©é‡ã€æ¸…æ™°ã€å¼·èª¿é‡é»)
# ==========================================
st.markdown("""
    <style>
    .stApp {
        background-color: #F0F4F8; /* æ·¡ç°è—åº•è‰²ï¼Œå°ˆæ¥­æ„Ÿ */
        font-family: "Microsoft JhengHei", sans-serif;
    }
    
    /* æ¨™é¡Œå€å¡Š */
    .header-box {
        background: linear-gradient(135deg, #2C3E50 0%, #4CA1AF 100%);
        padding: 30px 20px;
        border-radius: 0 0 30px 30px;
        color: white;
        text-align: center;
        margin-bottom: 25px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        margin-top: -60px;
    }
    .header-title { font-size: 28px; font-weight: bold; letter-spacing: 1px; }
    .header-subtitle { font-size: 16px; margin-top: 10px; opacity: 0.9; }
    
    /* ç·Šæ€¥é€šçŸ¥å¡ç‰‡ */
    .urgent-card {
        background-color: #FFF5F5;
        border-left: 5px solid #E53E3E;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 20px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }
    .urgent-title { color: #C53030; font-weight: bold; font-size: 18px; display: flex; align-items: center; }
    
    /* ä¸€èˆ¬è³‡è¨Šå¡ç‰‡ */
    .info-card {
        background: white;
        padding: 15px;
        border-radius: 12px;
        margin-bottom: 12px;
        border: 1px solid #E2E8F0;
        transition: transform 0.2s;
    }
    .info-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .card-tag {
        font-size: 12px;
        padding: 2px 8px;
        border-radius: 10px;
        color: white;
        margin-right: 8px;
        display: inline-block;
        margin-bottom: 5px;
    }
    
    /* æ¨™ç±¤é¡è‰²å®šç¾© */
    .tag-labor { background-color: #3182CE; } /* è—ï¼šå‹å·¥ */
    .tag-money { background-color: #38A169; } /* ç¶ ï¼šç¦åˆ©/éŒ¢ */
    .tag-health { background-color: #D69E2E; } /* é»ƒï¼šå¥åº· */
    .tag-life { background-color: #805AD5; } /* ç´«ï¼šç”Ÿæ´» */
    
    </style>
""", unsafe_allow_html=True)

# ==========================================
# 3. è³‡æ–™åº«å»ºç«‹
# ==========================================
regulations = [
    # å‹å·¥èˆ‡å°±æ¥­
    {"cat": "å‹å·¥", "title": "æœ€ä½å·¥è³‡èª¿æ¼²", "desc": "æœˆè–ªå‡è‡³ 29,500 å…ƒï¼Œæ™‚è–ª 196 å…ƒã€‚", "detail": "2026/1/1 ç”Ÿæ•ˆï¼Œå‹å¥ä¿ç´šè·å°‡åŒæ­¥èª¿æ•´ã€‚"},
    {"cat": "å‹å·¥", "title": "å‹ä¿å¹´é‡‘ 60 æ­²é ˜æ¸› 20%", "desc": "æ³•å®šè«‹é ˜å¹´é½¡èª¿é«˜è‡³ 65 æ­²ã€‚", "detail": "è‹¥ 60 æ­²æå‰é ˜ï¼Œæ¯æå‰ 1 å¹´æ‰£ 4%ï¼Œ5 å¹´å…±æ‰£ 20%ã€‚"},
    {"cat": "å‹å·¥", "title": "æ‰£å…¨å‹¤é ˆæŒ‰æ¯”ä¾‹", "desc": "è«‹å‡ä¸èƒ½ç›´æ¥æ‰£å…‰å…¨å‹¤çé‡‘ã€‚", "detail": "é‡å°å®¶åº­ç…§é¡§å‡æˆ–äº‹å‡ï¼Œé›‡ä¸»ä¸å¾—å› è«‹å‡ 1 å°æ™‚å°±æ‰£é™¤å…¨æœˆçé‡‘ã€‚"},
    {"cat": "å‹å·¥", "title": "è‚²å¬°å‡ä»¥æ—¥è¨ˆ", "desc": "å½ˆæ€§è«‹å‡ï¼Œé ˜ 8 æˆè–ªã€‚", "detail": "ä¸å†å¼·åˆ¶ä¸€æ¬¡è«‹é•·å‡ï¼Œå¯æŒ‰æ—¥ç”³è«‹ï¼Œæ–¹ä¾¿é›™è–ªå®¶åº­èª¿åº¦ã€‚"},
    {"cat": "å‹å·¥", "title": "æ•™å¬æ”¹ 14 å¤©", "desc": "åƒåŠ  1 æ¬¡æŠµ 2 æ¬¡ã€‚", "detail": "é‡å°é€€ä¼ 8 å¹´å…§å¤¥ä¼´ï¼Œé›–ç„¶å¤©æ•¸è®Šé•·ï¼Œä½†èƒ½åŠ é€Ÿæ¶ˆè€—å¬é›†é¡åº¦ã€‚"},
    
    # ç¦åˆ©èˆ‡è£œåŠ©
    {"cat": "ç¦åˆ©", "title": "ç¶œæ‰€ç¨…å¤§æ¸›ç¨…", "desc": "ç”Ÿæ´»è²»èª¿é«˜è‡³ 21.3 è¬ã€‚", "detail": "å…ç¨…é¡èˆ‡æ¨™æº–æ‰£é™¤é¡åŒæ­¥èª¿å‡ï¼Œå¤šå£ä¹‹å®¶ 2026 å ±ç¨…æ™‚è¶…æœ‰æ„Ÿã€‚"},
    {"cat": "ç¦åˆ©", "title": "è¾²ä¿ç”Ÿè‚²çµ¦ä»˜ 10 è¬", "desc": "é›™èƒèƒå¯é ˜ 20 è¬ã€‚", "detail": "æ¸›è¼•è¾²å‹å®¶åº­è² æ“”ï¼Œè£œåŠ©é‡‘é¡ç¿»å€ã€‚"},
    {"cat": "ç¦åˆ©", "title": "é•·ç…§æ‰£é™¤é¡ 18 è¬", "desc": "å®¶æœ‰éœ€ç…§é¡§è€…å¿…çœ‹ã€‚", "detail": "ç¶œæ‰€ç¨…ç‰¹åˆ¥æ‰£é™¤é¡èª¿å‡ï¼Œæ¸›è¼•é•·ç…§å®¶åº­ç¨…è² ã€‚"},
    {"cat": "ç¦åˆ©", "title": "ç§Ÿå±‹è£œè²¼æ’é•å»º", "desc": "é ‚æ¨“åŠ è“‹ä¸å†è£œåŠ©ã€‚", "detail": "æ–°åˆ¶æ’é™¤é ‚åŠ ç­‰é•å»ºï¼Œç§Ÿå±‹æ—è«‹å‹™å¿…ç¢ºèªæˆ¿æ±çš„å»ºç‰©åˆæ³•æ€§ã€‚"},
    {"cat": "ç¦åˆ©", "title": "åœ‹æ—…ä½å®¿è£œè²¼", "desc": "å¹³æ—¥å…¥ä½æœ€é«˜é ˜ 2000ã€‚", "detail": "é è¨ˆ 4 æœˆå•Ÿå‹•ã€‚ç¬¬ä¸€æ™š 800 å…ƒï¼ŒçºŒä½åŠ ç¢¼ 1200 å…ƒ (é™é€±æ—¥-é€±å››)ã€‚"},
    
    # é†«ç™‚èˆ‡å¥åº·
    {"cat": "å¥åº·", "title": "é•·ç…§ 3.0 å•Ÿå‹•", "desc": "ç´å…¥å¹´è¼•å‹å¤±æ™ºç—‡ã€‚", "detail": "æ–°å¢æ™ºæ…§è¼”å…·ç§Ÿè³ƒè£œåŠ©ï¼ˆå¦‚é˜²è·Œå€’åµæ¸¬ï¼‰ã€‚"},
    {"cat": "å¥åº·", "title": "å…è²»èƒƒç™Œç¯©æª¢", "desc": "45-74 æ­²ä¸€ç”Ÿä¸€æ¬¡ã€‚", "detail": "å…¬è²»èƒƒå¹½é–€èºæ—‹æ¡¿èŒç¯©æª¢ï¼ˆç³ä¾¿æª¢æŸ¥ï¼‰ï¼Œé é˜²å‹æ–¼æ²»ç™‚ã€‚"},
    {"cat": "å¥åº·", "title": "åœ‹æ°‘å¹´é‡‘æ¼²åƒ¹", "desc": "æ¯æœˆè‡ªä»˜é¡å¢ 84 å…ƒã€‚", "detail": "éš¨è‘—ç‰©åƒ¹æŒ‡æ•¸èª¿æ•´è²»ç‡ã€‚"},
    
    # ç”Ÿæ´»æ³•è¦
    {"cat": "ç”Ÿæ´»", "title": "é«˜é½¡æ›ç…§é™è‡³ 70 æ­²", "desc": "éœ€é€šéé«”æª¢èˆ‡èªçŸ¥æ¸¬é©—ã€‚", "detail": "2026 å¹´ 5 æœˆèµ·å¯¦æ–½ï¼Œæ›ç™¼é§•ç…§æ•ˆæœŸç‚º 3 å¹´ã€‚"},
    {"cat": "ç”Ÿæ´»", "title": "ç„¡ç…§é§•é§›é‡ç½°", "desc": "ç´¯çŠ¯ç½° 6 è¬ + æ‰£è»Šã€‚", "detail": "ç½°å‰‡å¤§å¹…åŠ é‡ï¼Œä¸¦å¾—æ²’å…¥è»Šè¼›ï¼Œåˆ‡å‹¿ä»¥èº«è©¦æ³•ã€‚"},
    {"cat": "ç”Ÿæ´»", "title": "åŒ—æ· iPhone é€²ç«™", "desc": "é è¨ˆ 7 æœˆè§£é–åŠŸèƒ½ã€‚", "detail": "é–˜é–€ç³»çµ±æ›´æ–°ï¼Œæ”¯æ´ Apple Pay å¿«é€Ÿé€šé—œã€‚"},
    {"cat": "ç”Ÿæ´»", "title": "å®¶è²“å¼·åˆ¶æ¤æ™¶ç‰‡", "desc": "é•è€…ç½° 1.5 è¬ã€‚", "detail": "2026/1/1 é–‹ç½°ï¼Œè«‹ç›¡é€Ÿå¸¶è²“å’ªè‡³ç¸é†«é™¢å®Œæˆå¯µç‰©ç™»è¨˜ã€‚"},
    {"cat": "ç”Ÿæ´»", "title": "åŸæ°‘èº«åˆ†ç™»è¨˜ (ç·Šæ€¥)", "desc": "1/5 æœŸé™å°‡è‡³ï¼", "detail": "éœ€å›å¾©å‚³çµ±åå­—æˆ–ä¸¦åˆ—ç¾…é¦¬æ‹¼éŸ³ã€‚è‹¥éŒ¯éï¼Œè«‹æŠŠæ¡æœ€å¾Œ 30 å¤©è£œæ•‘æœŸã€‚"}
]

# ==========================================
# 4. é é¢å…§å®¹
# ==========================================

# Header
st.markdown("""
    <div class="header-box">
        <div class="header-title">âš–ï¸ 2026 æ–°åˆ¶åº¦æ¬Šç›Šé€š</div>
        <div class="header-subtitle">ä¸‰ä¸€æ•™è‚²æ–‡åŒ–å”æœƒ é—œå¿ƒæ‚¨çš„æ¬Šç›Š</div>
    </div>
""", unsafe_allow_html=True)

# ç·Šæ€¥é€šçŸ¥å€ (å‹•æ…‹åˆ¤æ–·æ—¥æœŸ)
today = date.today()
deadline = date(2026, 1, 5)
days_left = (deadline - today).days

if days_left < 30: # å‡è¨­åœ¨æœŸé™å‰å¾Œ
    st.markdown(f"""
    <div class="urgent-card">
        <div class="urgent-title">ğŸ”¥ ç·Šæ€¥æé†’ï¼šåŸä½æ°‘èº«åˆ†ç™»è¨˜</div>
        <p style="margin-top: 10px;">
            <b>é‚„æœ‰æ©Ÿæœƒè£œæ•‘ï¼</b> ä¾æ“šæ–°æ³•ï¼Œè‹¥æ‚¨å°šæœªå®Œæˆã€Œå›å¾©å‚³çµ±åå­—ã€æˆ–ã€Œä¸¦åˆ—ç¾…é¦¬æ‹¼éŸ³ã€ï¼Œ
            è«‹å‹™å¿…åœ¨ <b>2026/1/5</b> å‰ï¼ˆæˆ–éš¨å¾Œçš„ 30 å¤©è£œæ•‘æœŸå…§ï¼‰å‰å¾€æˆ¶æ”¿äº‹å‹™æ‰€è¾¦ç†ï¼Œä»¥å…å–ªå¤±èº«åˆ†ã€‚
        </p>
    </div>
    """, unsafe_allow_html=True)

# Main Tabs
tab1, tab2, tab3 = st.tabs(["ğŸ“œ 18é …åˆ¶åº¦æ‡¶äººåŒ…", "âœ… æ‚¨çš„è¡Œå‹•æ¸…å–®", "ğŸ” å”æœƒè£œå……è§€é»"])

# --- Tab 1: åˆ¶åº¦ä»‹ç´¹ ---
with tab1:
    st.markdown("### 2026 é—œéµæ–°åˆ¶ä¸€è¦½")
    
    # ç¯©é¸å™¨
    filter_cat = st.multiselect("ç¯©é¸é¡åˆ¥", ["å‹å·¥", "ç¦åˆ©", "å¥åº·", "ç”Ÿæ´»"], default=["å‹å·¥", "ç¦åˆ©", "å¥åº·", "ç”Ÿæ´»"])
    
    cols = st.columns(2)
    
    filtered_data = [r for r in regulations if r['cat'] in filter_cat]
    
    for i, item in enumerate(filtered_data):
        # æ±ºå®šé¡è‰²æ¨™ç±¤
        color_class = {
            "å‹å·¥": "tag-labor",
            "ç¦åˆ©": "tag-money",
            "å¥åº·": "tag-health",
            "ç”Ÿæ´»": "tag-life"
        }.get(item['cat'], "tag-life")
        
        with cols[i % 2]:
            st.markdown(f"""
            <div class="info-card">
                <div><span class="card-tag {color_class}">{item['cat']}</span></div>
                <div style="font-weight:bold; font-size:16px; margin-top:5px;">{item['title']}</div>
                <div style="color:#555; font-size:14px; margin: 5px 0;">{item['desc']}</div>
                <div style="color:#718096; font-size:12px; border-top:1px solid #eee; padding-top:5px;">
                    ğŸ’¡ {item['detail']}
                </div>
            </div>
            """, unsafe_allow_html=True)

# --- Tab 2: è¾¦ç†æ–¹å¼ ---
with tab2:
    st.markdown("### ğŸ“ è«‹ç«‹å³æª¢æŸ¥ä»¥ä¸‹é …ç›®")
    st.caption("ä¸‰ä¸€å”æœƒå¹«æ‚¨æ•´ç†äº†éœ€è¦ã€Œæ¡å–è¡Œå‹•ã€çš„é …ç›®ï¼Œè«‹é€ä¸€æ‰“å‹¾ç¢ºèªã€‚")
    
    st.markdown("#### ğŸ”´ æœ€ç·Šæ€¥")
    c1 = st.checkbox("ã€åŸæ°‘èº«åˆ†ã€‘æª¢æŸ¥æˆ¶å£åç°¿ï¼Œç¢ºèªæ˜¯å¦å·²å›å¾©å‚³çµ±åæˆ–ä¸¦åˆ—ç¾…é¦¬æ‹¼éŸ³ï¼Ÿ(æœŸé™ç·Šè¿«)")
    
    st.markdown("#### ğŸŸ  å»ºè­°ç›¡å¿«")
    c2 = st.checkbox("ã€è²“å¥´æ³¨æ„ã€‘æª¢æŸ¥å®¶è²“æ˜¯å¦å·²æ¤å…¥æ™¶ç‰‡ä¸¦å®Œæˆå¯µç‰©ç™»è¨˜ï¼Ÿ(é•è€…ç½°1.5è¬)")
    c3 = st.checkbox("ã€é«˜é½¡é§•é§›ã€‘å®¶ä¸­æ˜¯å¦æœ‰æ»¿ 70 æ­²é•·è¼©ï¼Ÿæé†’ç•™æ„æ›ç…§é€šçŸ¥å–®ã€‚")
    
    st.markdown("#### ğŸ”µ å¹´åº¦è¦åŠƒ")
    c4 = st.checkbox("ã€å¥åº·æª¢æŸ¥ã€‘æ»¿ 45 æ­²äº†å—ï¼Ÿé ç´„å…è²»èƒƒå¹½é–€èºæ—‹æ¡¿èŒç¯©æª¢ã€‚")
    c5 = st.checkbox("ã€æ—…éŠè¦åŠƒã€‘4æœˆèµ·å¹³æ—¥åœ‹æ—…æœ‰è£œåŠ©ï¼Œè¨˜å¾—å…ˆä¸Šç¶²ç™»éŒ„è³‡æ–™ã€‚")
    
    st.info("ğŸ’¡ åªè¦å®Œæˆä¸Šè¿°æ‰“å‹¾é …ç›®ï¼Œæ‚¨å°±é¿é–‹äº† 90% çš„æ–°åˆ¶é¢¨éšªï¼")

# --- Tab 3: å”æœƒè£œå…… ---
with tab3:
    st.markdown("### ğŸ” é‚„æœ‰ä»€éº¼è¢«æ¼æ‰äº†ï¼Ÿ")
    st.markdown("åœ–è¡¨ä¸­æœªåˆ—å‡ºï¼Œä½†**ä¸‰ä¸€å”æœƒ**èªç‚ºå°å¤§å®¶å½±éŸ¿å¾ˆå¤§çš„è¶¨å‹¢ï¼š")
    
    st.markdown("""
    #### 1. ğŸŒ ç¢³è²»æ­£å¼é–‹å¾µ (ç‰©åƒ¹æ³¢å‹•é è­¦)
    * **å…§å®¹**ï¼š2026 å¹´èµ·é‡å°æ’ç¢³å¤§æˆ¶å¾µæ”¶ç¢³è²»ã€‚
    * **å½±éŸ¿**ï¼šé›–ç„¶ä¸ç›´æ¥å°æ°‘çœ¾æ”¶éŒ¢ï¼Œä½†æ°´æ³¥ã€é‹¼éµã€é›»åŠ›æˆæœ¬å¯èƒ½è½‰å«ï¼Œéœ€ç•™æ„ç‰©åƒ¹æ³¢å‹•ã€‚
    
    #### 2. ğŸš— é›»å‹•è»Šå…ç¨…å»¶é•·
    * **å…§å®¹**ï¼šé›»å‹•è»Šå…å¾µä½¿ç”¨ç‰Œç…§ç¨…å„ªæƒ ï¼Œç¢ºèªå»¶é•·è‡³ 2030 å¹´ã€‚
    * **å»ºè­°**ï¼šè‹¥ä»Šå¹´æœ‰è³¼è»Šéœ€æ±‚ï¼Œé›»å‹•è»Šä»æ˜¯ç¨…å‹™ä¸Šçš„é¦–é¸ã€‚
    
    #### 3. ğŸ’¼ å‹ä¿ç´šè·éš¨ä¹‹èª¿æ•´
    * **å…§å®¹**ï¼šé…åˆåŸºæœ¬å·¥è³‡æ¼²è‡³ 29,500 å…ƒï¼Œå‹ä¿æŠ•ä¿è–ªè³‡ã€Œç¬¬ 1 ç´šã€ä¹Ÿå°‡åŒæ­¥èª¿å‡ã€‚
    * **å½±éŸ¿**ï¼šé›‡ä¸»èˆ‡å‹å·¥æ¯å€‹æœˆéœ€ç¹³çš„ä¿è²»æœƒç¨å¾®è®Šå¤šä¸€é»é»ï¼Œä½†æœªä¾†çš„ä¿éšœä¹Ÿéš¨ä¹‹æé«˜ã€‚
    """)
    
    st.divider()
    st.markdown("#### ğŸ“º æ¨è–¦è§€çœ‹å½±ç‰‡")
    st.video("https://www.youtube.com/watch?v=9SkfgNnI3_E")
    st.caption("å½±ç‰‡ï¼šç™»è¨˜åŸæ°‘èº«åˆ†å±•å»¶ 1/5 èµ· 30 æ—¥å…§é‚„å¯ç”³è«‹è£œè¾¦ (ä¾†æºï¼šåŸè¦–æ–°è)")

# Footer
st.markdown("---")
st.markdown("<div style='text-align:center; color:#888;'>Â© 2026 ä¸‰ä¸€æ•™è‚²æ–‡åŒ–å”æœƒ | è³‡æ–™ä¾†æºï¼šæ”¿åºœå…¬å‘Šèˆ‡ AI å½™æ•´</div>", unsafe_allow_html=True)
